<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>RADIO</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Banner superior -->
  <div class="banner">
    <div class="banner-content">
      <img src="imagenes/foto.jpeg" alt="Foto" class="banner-foto">
      <h1 class="banner-titulo">RADIO</h1>
    </div>
  </div>

  <!-- Reproductor de radio -->
  <div class="reproductor">
    <div data-type="newStreamPlayer"
         data-publicToken="8dbc7080-19f5-475b-a777-c58d74d65be7"
         data-theme="dark"
         data-color="e81e4d"
         data-channelId=""
         data-rendered="false"
         class="cstrEmbed">
      <a href="https://www.caster.fm">Shoutcast Hosting</a>
      <a href="https://www.caster.fm">Stream Hosting</a>
      <a href="https://www.caster.fm">Radio Server Hosting</a>
    </div>
    <script src="//cdn.cloud.caster.fm/widgets/embed.js"></script>
  </div>

  <!-- Hora y fecha -->
  <div class="hora-fecha">
    <div id="horaDigital"></div>
    <div id="fechaDigital"></div>
  </div>

  <!-- Descripción -->
  <div class="mensaje">
    <h2>Welcome to the website</h2>
    <p>Escucha nuestra transmisión en vivo </p>
  </div>

  <script>
  async function actualizarHoraFecha() {
    try {
      const res = await fetch('/api/hora');
      const data = await res.json();

      // Separa hora y AM/PM
      const match = data.hora.match(/(\d{2}:\d{2})\s*([AP]M)/i);
      let horaHtml;
      if (match) {
        horaHtml = `<span>${match[1]}</span> <span class="ampm">${match[2].toUpperCase()}</span>`;
      } else {
        horaHtml = `<span>${data.hora}</span>`;
      }

      document.getElementById('horaDigital').innerHTML = horaHtml;
      document.getElementById('fechaDigital').textContent = data.fecha.charAt(0).toUpperCase() + data.fecha.slice(1);
    } catch (e) {
      document.getElementById('horaDigital').textContent = 'Error';
      document.getElementById('fechaDigital').textContent = '';
    }
  }
  setInterval(actualizarHoraFecha, 10000); // Actualiza cada 10 segundos
  actualizarHoraFecha();
  </script>
</body>
</html>
